<div class="cpn-container">
    <!-- Header -->
    <div class="pagetitle">
        <h1>Đơn vị tính</h1>
        <nav>
            <ol class="breadcrumb">
                <li *ngFor="let item of breadcrumbList" class="breadcrumb-item"><a
                        routerLink="{{item.path}}">{{item.name}}</a></li>
            </ol>
        </nav>
    </div>
    <!-- Body -->

    <div class="cpn-content">
        <div class="d-flex border-bottom  flex-wrap">
            <div class="d-flex flex-row-reverse card-function">
                <div>
                    <button (click)="handleDrawer(true)" type="button" class="btn btn-create">
                        <i class="bi bi-plus-circle-dotted"></i> Thêm mới
                    </button>
                </div>
            </div>
        </div>

        <div class="d-flex flex-row p-1 pb-0 border-bottom flex-wrap">
            <div class="d-flex flex-row flex-grow-3 p-l-2 mb-1">
                <div class="input-group search-box">
                    <input type="text" class="form-control" [(ngModel)]="filter.KeyWord" placeholder="Nhập từ khóa tìm kiếm" />
                    <span (click)="loadInit()" class="input-group-text"><i class="bi bi-search"></i></span>
                    <span (click)="loadInit(1, true)" class="input-group-text"><i class="bi bi-arrow-clockwise"></i></span>
                </div>
            </div>
        </div>

        <div class="p-2">
            <table class="table table-hover table-click-row" id="table-user">
                <thead>
                    <tr>
                        <th scope="col" class="align-center">STT</th>
                        <th scope="col" class="align-center">Mã đơn vị</th>
                        <th scope="col" class="align-center">Tên đơn vị</th>
                        <th scope="col" class="align-center">Trạng thái</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of listUnit, index as i" (click)="handleDrawer(true, item)">
                        <td class="align-center">{{i + 1}}</td>
                        <td class="align-center">{{item.Code}}</td>
                        <td class="align-center">{{item.Name}}</td>
                        <td class="align-center">
                            <div class="form-check form-switch hard-center">
                                <input disabled class="form-check-input" type="checkbox" name="ACTIVE"
                                    [(ngModel)]="item.ACTIVE">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="float-end">
                <app-pagination [pageSize]="filter.PageSize" [totalPage]="filter.TotalPage"
                    [(page)]="filter.CurrentPage" (pageChange)="onChangePage($event)"></app-pagination>
            </div>
        </div>
    </div>
</div>


<!-- drawer -->

<div class="drawer-content-wrapper" [ngClass]="openDrawer ? 'open-drawer' : 'close-drawer'">
    <form [formGroup]="unitForm" *ngIf="unitForm" (ngSubmit)="saveDetail()">
        <div class="drawer-header">
            <div class="drawer-header-title"><button (click)="handleDrawer(false)" type="button"
                    aria-label="Close" class="drawer-close"><span role="img" aria-label="close"
                        class="anticon anticon-close"><svg viewBox="64 64 896 896" focusable="false" data-icon="close"
                            width="1em" height="1em" fill="currentColor" aria-hidden="true">
                            <path
                                d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z">
                            </path>
                        </svg></span></button>
                <div class="drawer-title">{{edit ? 'Chỉnh sửa' : 'Thêm mới'}}</div>
            </div>
            <div class="drawer-extra">
                <div class="space-align-center">
                    <div class="space-item"><button (click)="handleDrawer(false)" type="button"
                            class="btn-default"><span>Huỷ</span></button></div>
                    <div class="space-item"><button type="submit" class="btn-primary"><span>Lưu</span></button></div>
                </div>
            </div>
        </div>
        <div class="drawer-body">
            <h5 class="card-title">Đơn vị tính</h5>
            <div class="row mb-3">
                <label for="inputText" class="col-sm-3 col-form-label">Mã đơn vị<span class="text-danger ms-1">*</span></label>
                <div class="col-sm-9">
                    <input [ngClass]="{ 'is-invalid': submitted && f['code'].errors }" type="text" class="form-control"
                        formControlName="code">
                    <div *ngIf="submitted && f['code'].errors" class="invalid-feedback">
                        <div *ngIf="f['code']['errors']['required']">Không được để trống</div>
                    </div>
                </div>
            </div>
            <div class="row mb-3">
                <label for="inputEmail" class="col-sm-3 col-form-label">Tên đơn vị<span class="text-danger ms-1">*</span></label>
                <div class="col-sm-9">
                    <input [ngClass]="{ 'is-invalid': submitted && f['code'].errors }" type="text" class="form-control"
                    formControlName="name">
                    <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
                        <div *ngIf="f['name']['errors']['required']">Không được để trống</div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>